<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Verify Email</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h2>Email Verification</h2>
    <form id="verifyForm">
      <input type="email" id="email" placeholder="Enter your email" required><br>
      <input type="text" id="code" placeholder="Enter verification code" required><br>
      <button type="submit">Verify</button>
    </form>
  </div>

  <!-- Popbox -->
  <div id="popbox" class="popbox">
    <div class="popbox-content">
      <p id="popboxMessage"></p>
      <button onclick="closePopbox()">OK</button>
    </div>
  </div>

<script>
const backendURL = "https://dark-love-md-bot-2.onrender.com";

document.getElementById("verifyForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const email = document.getElementById("email").value;
  const code = document.getElementById("code").value;

  const res = await fetch(`${backendURL}/auth/verify`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email, code }),
  });

  const data = await res.json();
  showPopbox(data.message || data.error);

  if (data.message) {
    setTimeout(() => window.location.href = "index.html", 2000);
  }
});

function showPopbox(msg) {
  document.getElementById("popboxMessage").innerText = msg;
  document.getElementById("popbox").style.display = "flex";
}
function closePopbox() {
  document.getElementById("popbox").style.display = "none";
}
</script>
</body>
</html>
